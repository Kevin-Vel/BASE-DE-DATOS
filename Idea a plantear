
Juntar 2 tablas para ver resultados de ambas
tablas de difernetes ingresos
SELECT 
    c.CuentaID,
    c.NumeroCuenta,
    c.Saldo,
    t.TransaccionID,
    t.Fecha,
    t.Típo,
    t.Monto,
    t.EmpleadoID
FROM Cuentas c
INNER JOIN Transacciones t
    ON c.CuentaID = t.CuentaID;

Comando a consultar caracteristicas de la tabla
SELECT * FROM INFORMATION_SCHEMA.COLUMNS
WHERE TABLE_NAME = 'Cliente';

Comando para ordenar de en orden alfabetico
SELECT 
    CONCAT(ape_cli, ' ', nom_cli) AS NombreCompleto (CONCAT una las 2 columnas)
FROM Cliente
ORDER BY ape_cli ASC, nom_cli ASC;

Recuperar Datos de una Tabla
SELECT nom_cli, edad_cli FROM Cliente;

Muestra tabla pasando si hay un dato Null
SELECT * FROM Prestamos
WHERE ClienteID IS NULL;

SELECT * FROM Empleados
WHERE Nombre LIKE 'L%'; -- Nombres que empiezan con 'L

Consulta simple
SELECT nom_cli, ape_cli
FROM Cliente
WHERE clienteID = 4;


Consulta con el Having
SELECT columna1, función_agregación(columna2)
FROM tabla
GROUP BY columna1
HAVING condición_función_agregación;

Like buscar un patron comun en una columna
SELECT * FROM Empleados
WHERE Nombre LIKE 'J%'; -- Nombres que empiezan con 'J'

Comando cuenta lo registros de cada valor
SELECT transaccionID, COUNT(*) AS Totaltransacciones
FROM Transacciones
GROUP BY transaccionID;

Comando de 3 valores true, false o null
SELECT * FROM Prestamos
WHERE Monto > 20000 OR Monto IS NULL;

Comando BetWeen tipo un filtro de busqueda
SELECT * FROM Prestamos
WHERE Monto BETWEEN 30000 AND 100000; 

Comando IN consultar valores en columnas especificas
SELECT * FROM Empleados
WHERE EmpleadoID IN (1, 3, 5);

Comando EXEC
EXEC sp_help 'Clientes';

Comando CASE
SELECT 
  Nombre,
  CASE
    WHEN Salario > 5000 THEN 'Alto'
    WHEN Salario BETWEEN 3000 AND 5000 THEN 'Medio'
    ELSE 'Bajo'
  END AS NivelSalario
FROM Empleados;

Comando CONSULTA MULTIPLE
use Banco;
SELECT Nombre, FechaIngreso
FROM Empleados
WHERE EmpleadoID = 4;

COMANDO EXISTS o NOT EXIST
SELECT FachaInicio
FROM Seguro s
WHERE EXISTS 
(SELECT 1 FROM Prestamos p 
WHERE p.FechaInicio = s.FechaInicio);

COMANDO DE USO IN
SELECT c.nom_cli, c.ape_cli, cu.Numerocuenta, cu.Saldo
FROM Cliente c
JOIN Cuentas cu ON c.clienteID = cu.ClienteID
WHERE cu.TipoCuenta = 'Ahorros';

Comando Inner Join
SELECT 
  e.Nombre AS Empleado,
  t.transaccionID,
  t.Tipo,
  t.Monto,
  t.Fecha
FROM Empleados e
INNER JOIN Transacciones t 
  ON e.EmpleadoID = t.EmpleadoID;

Comando LEFT JOIN
SELECT e.Nombre, e.Apellido, t.Típo, t.Monto, t.Fecha
FROM Empleados e
LEFT JOIN Transacciones t ON e.EmpleadoID = t.EmpleadoID;

Comando RIGHT JOIN
SELECT 
    e.EmpleadoID,
    e.Nombre,
    e.Apellido,
    t.TransaccionID,
    t.Tipo,
    t.Monto,
    t.Fecha
FROM Empleados e
RIGHT JOIN Transacciones t
    ON e.EmpleadoID = t.EmpleadoID;

Comando FULL JOIN
SELECT 
    e.Nombre + ' ' + e.Apellido AS Empleado,
    t.TransaccionID,
    t.Tipo,
    t.Monto,
    t.Fecha
FROM Empleados e
FULL JOIN Transacciones t
    ON e.EmpleadoID = t.EmpleadoID;

Comando CROSS JOIN
SELECT c.nom_cli + ' ' + c.ape_cli AS Cliente,
       p.PrestamoID,
       p.Monto,
       p.TasaInteres
FROM Cliente c
CROSS JOIN Prestamos p;

Comando UNION
SELECT nom_cli AS Nombre
FROM Clientes
UNION
SELECT Nombre
FROM Empleados;

Comando PIVOT
SELECT *
FROM (
    SELECT 
        CuentaID,
        DATENAME(MONTH, Fecha) AS Mes,
        Monto
    FROM Transacciones
) AS Fuente
PIVOT (
    SUM(Monto)
    FOR Mes IN ([Enero], [Febrero], [Marzo], [Abril], [Mayo], [Junio],
                [Julio], [Agosto], [Septiembre], [Octubre], [Noviembre], [Diciembre])
) AS PivotTable;

Comando CREATE PROCEDER
CREATE PROCEDURE ProcesarPrestamo
    @PrestamoID INT
AS
BEGIN
    BEGIN TRANSACTION;
    BEGIN TRY
        UPDATE Prestamos
        SET Estado = 'Procesado'
        WHERE PrestamoID = @PrestamoID;

        COMMIT TRANSACTION;
    END TRY
    BEGIN CATCH
        ROLLBACK TRANSACTION;
        THROW;
    END CATCH
END;
GO

Comando para Llamar a el CREAER PROCEDER creado
EXEC ProcesarPrestamo @PrestamoID = 1;

Comando para ver resultado
SELECT *
FROM Prestamos
WHERE PrestamoID = 1;

Comando de Funcion
CREATE FUNCTION dbo.fn_PrestamosActivosPorCliente(@ClienteID INT)
RETURNS TABLE
AS
RETURN
(
    SELECT 
        p.PrestamoID,
        p.Monto,
        p.TasaInteres,
        p.FechaInicio,
        p.FechaVencimiento,
        p.Estado
    FROM Prestamos p
    INNER JOIN Cliente c ON p.ClienteID = c.ClienteID
    WHERE p.Estado = 'Activo'
      AND c.ClienteID = @ClienteID
);
GO

Comando para Llamar CREATE FUNCION
SELECT * FROM dbo.fn_PrestamosActivosPorCliente(1);

TABLA INTERMEDIA CLIENTE SEGURO
CREATE TABLE ClienteSeguro (
    ClienteID INT,
    SeguroID INT,
    FechaAsociacion DATE,
    PRIMARY KEY (ClienteID, SeguroID),
    FOREIGN KEY (ClienteID) REFERENCES Cliente(ClienteID),
    FOREIGN KEY (SeguroID) REFERENCES Seguros(SeguroID)
);

ENCONTRAR BASE DE DATOS

